{"version":3,"sources":["./node_modules/@capacitor/camera/dist/esm/definitions.js","./node_modules/@capacitor/camera/dist/esm/index.js","./node_modules/@capacitor/filesystem/dist/esm/definitions.js","./node_modules/@capacitor/filesystem/dist/esm/index.js","./src/app/core/global/upload-picture/upload-picture-routing.module.ts","./src/app/core/global/upload-picture/upload-picture.module.ts","./src/app/core/global/upload-picture/upload-picture.page.ts","./src/app/shared/services/photo/photo.service.ts","./src/app/core/global/upload-picture/upload-picture.page.scss","./src/app/core/global/upload-picture/upload-picture.page.html"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oCAAoC;AAC9B;AACP;AACA;AACA;AACA,CAAC,0CAA0C;AACpC;AACP;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AAC7C,uC;;;;;;;;;;;;;;;;;;;;AC1BiD;AACjD,eAAe,+DAAc;AAC7B,eAAe,8JAAe;AAC9B,CAAC;AAC6B;AACZ;AAClB,iC;;;;;;;;;;;;;;;;;;ACNO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B;AACxB;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;AAC7B;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACO;AACP,uC;;;;;;;;;;;;;;;;;;;;;AC5FiD;AACjD,mBAAmB,+DAAc;AACjC,eAAe,kKAAe;AAC9B,CAAC;AAC6B;AACR;AACtB,iC;;;;;;;;;;;;;;;;;;;;ACNyC;AACc;AAEG;AAE1D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mEAAiB;KAC7B;CACF,CAAC;IAMW,8BAA8B,SAA9B,8BAA8B;CAAG;AAAjC,8BAA8B;IAJ1C,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,8BAA8B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;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","file":"src_app_core_global_upload-picture_upload-picture_module_ts.js","sourcesContent":["export var CameraSource;\n(function (CameraSource) {\n    /**\n     * Prompts the user to select either the photo album or take a photo.\n     */\n    CameraSource[\"Prompt\"] = \"PROMPT\";\n    /**\n     * Take a new photo using the camera.\n     */\n    CameraSource[\"Camera\"] = \"CAMERA\";\n    /**\n     * Pick an existing photo fron the gallery or photo album.\n     */\n    CameraSource[\"Photos\"] = \"PHOTOS\";\n})(CameraSource || (CameraSource = {}));\nexport var CameraDirection;\n(function (CameraDirection) {\n    CameraDirection[\"Rear\"] = \"REAR\";\n    CameraDirection[\"Front\"] = \"FRONT\";\n})(CameraDirection || (CameraDirection = {}));\nexport var CameraResultType;\n(function (CameraResultType) {\n    CameraResultType[\"Uri\"] = \"uri\";\n    CameraResultType[\"Base64\"] = \"base64\";\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\n})(CameraResultType || (CameraResultType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Camera = registerPlugin('Camera', {\n    web: () => import('./web').then(m => new m.CameraWeb()),\n});\nexport * from './definitions';\nexport { Camera };\n//# sourceMappingURL=index.js.map","export var Directory;\n(function (Directory) {\n    /**\n     * The Documents directory\n     * On iOS it's the app's documents directory.\n     * Use this directory to store user-generated content.\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Documents\"] = \"DOCUMENTS\";\n    /**\n     * The Data directory\n     * On iOS it will use the Documents directory\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Data\"] = \"DATA\";\n    /**\n     * The Cache directory\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files\n     * that your app can re-create easily.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Cache\"] = \"CACHE\";\n    /**\n     * The external directory\n     * On iOS it will use the Documents directory\n     * On Android it's the directory on the primary shared/external\n     * storage device where the application can place persistent files it owns.\n     * These files are internal to the applications, and not typically visible\n     * to the user as media.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"External\"] = \"EXTERNAL\";\n    /**\n     * The external storage directory\n     * On iOS it will use the Documents directory\n     * On Android it's the primary shared/external storage directory.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\n})(Directory || (Directory = {}));\nexport var Encoding;\n(function (Encoding) {\n    /**\n     * Eight-bit UCS Transformation Format\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF8\"] = \"utf8\";\n    /**\n     * Seven-bit ASCII, a.k.a. ISO646-US, a.k.a. the Basic Latin block of the\n     * Unicode character set\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"ASCII\"] = \"ascii\";\n    /**\n     * Sixteen-bit UCS Transformation Format, byte order identified by an\n     * optional byte-order mark\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF16\"] = \"utf16\";\n})(Encoding || (Encoding = {}));\n/**\n * @deprecated Use `Directory`.\n * @since 1.0.0\n */\nexport const FilesystemDirectory = Directory;\n/**\n * @deprecated Use `Encoding`.\n * @since 1.0.0\n */\nexport const FilesystemEncoding = Encoding;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Filesystem = registerPlugin('Filesystem', {\n    web: () => import('./web').then(m => new m.FilesystemWeb()),\n});\nexport * from './definitions';\nexport { Filesystem };\n//# sourceMappingURL=index.js.map","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UploadPicturePage } from './upload-picture.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UploadPicturePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UploadPicturePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UploadPicturePageRoutingModule } from './upload-picture-routing.module';\n\nimport { UploadPicturePage } from './upload-picture.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UploadPicturePageRoutingModule\n  ],\n  declarations: [UploadPicturePage]\n})\nexport class UploadPicturePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { PhotoService } from '../../../shared/services/photo/photo.service';\n\n@Component({\n  selector: 'app-upload-picture',\n  templateUrl: './upload-picture.page.html',\n  styleUrls: ['./upload-picture.page.scss'],\n})\nexport class UploadPicturePage implements OnInit {\n\n  constructor(public photoService: PhotoService) { }\n\n  addPhotoToGallery() {\n    this.photoService.addNewToGallery();\n  }\n\n  async ngOnInit() {\n    await this.photoService.loadSaved();\n  }\n\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\n/* eslint-disable @typescript-eslint/member-ordering */\nimport { Injectable } from '@angular/core';\nimport {\n  Camera,\n  CameraPhoto,\n  CameraResultType,\n  CameraSource,\n  Photo,\n} from '@capacitor/camera';\nimport { Capacitor } from '@capacitor/core';\nimport { Directory, Filesystem } from '@capacitor/filesystem';\nimport { Storage } from '@capacitor/storage';\nimport { Platform } from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PhotoService {\n\n  public photos: UserPhoto[] = [];\n  private PHOTO_STORAGE: string = 'photos';\n  private platform: Platform;\n\n  constructor(platform: Platform) {\n    this.platform = platform;\n  }\n\n  public async addNewToGallery() {\n    // Take a photo\n    const capturedPhoto = await Camera.getPhoto({\n      resultType: CameraResultType.Uri,\n      source: CameraSource.Camera,\n      quality: 100,\n    });\n\n    this.photos.unshift({\n      filepath: 'soon...',\n      webviewPath: capturedPhoto.webPath\n    });\n\n    // // Save the picture and add it to photo collection\n    // const savedImageFile = await this.savePicture(capturedPhoto);\n    // this.photos.unshift(savedImageFile);\n\n    // Storage.set({\n    //   key: this.PHOTO_STORAGE,\n    //   value: JSON.stringify(this.photos),\n    // });\n  }\n\n  public async loadSaved() {\n    // Retrieve cached photo array data\n    const photoList = await Storage.get({ key: this.PHOTO_STORAGE });\n    this.photos = JSON.parse(photoList.value) || [];\n\n    // Easiest way to detect when running on the web:\n    // “when the platform is NOT hybrid, do this”\n    if (!this.platform.is('hybrid')) {\n      // Display the photo by reading into base64 format\n      for (const photo of this.photos) {\n        // Read each saved photo's data from the Filesystem\n        const readFile = await Filesystem.readFile({\n            path: photo.filepath,\n            directory: Directory.Data\n        });\n\n        // Web platform only: Load the photo as base64 data\n        photo.webviewPath = `data:image/jpeg;base64,${readFile.data}`;\n      }\n    }\n  }\n\n  private async readAsBase64(cameraPhoto: CameraPhoto) {\n    // \"hybrid\" will detect Cordova or Capacitor\n    if (this.platform.is('hybrid')) {\n      // Read the file into base64 format\n      const file = await Filesystem.readFile({\n        path: cameraPhoto.path\n      });\n\n      return file.data;\n    }\n    else {\n      // Fetch the photo, read as a blob, then convert to base64 format\n      const response = await fetch(cameraPhoto.webPath);\n      const blob = await response.blob();\n\n      return await this.convertBlobToBase64(blob) as string;\n    }\n  }\n\n  // Save picture to file on device\n  // private async savePicture(cameraPhoto: CameraPhoto) {\n  //   // Convert photo to base64 format, required by Filesystem API to save\n  //   const base64Data = await this.readAsBase64(cameraPhoto);\n\n  //   // Write the file to the data directory\n  //   const fileName = new Date().getTime() + '.jpeg';\n  //   const savedFile = await Filesystem.writeFile({\n  //     path: fileName,\n  //     data: base64Data,\n  //     directory: Directory.Data\n  //   });\n\n  //   if (this.platform.is('hybrid')) {\n  //     // Display the new image by rewriting the 'file://' path to HTTP\n  //     // Details: https://ionicframework.com/docs/building/webview#file-protocol\n  //     return {\n  //       filepath: savedFile.uri,\n  //       webviewPath: Capacitor.convertFileSrc(savedFile.uri),\n  //     };\n  //   }\n  //   else {\n  //     // Use webPath to display the new image instead of base64 since it's\n  //     // already loaded into memory\n  //     return {\n  //       filepath: fileName,\n  //       webviewPath: cameraPhoto.webPath\n  //     };\n  //   }\n  // }\n\n  convertBlobToBase64 = (blob: Blob) =>\n    new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onerror = reject;\n      reader.onload = () => {\n        resolve(reader.result);\n      };\n      reader.readAsDataURL(blob);\n    });\n}\n\nexport interface UserPhoto {\n  filepath: string;\n  webviewPath: string;\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGxvYWQtcGljdHVyZS5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Muat Naik Gambar</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\" *ngFor=\\\"let photo of photoService.photos; index as position\\\">\\n        <ion-img [src]=\\\"photo.webviewPath\\\"></ion-img>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"center\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button (click)=\\\"addPhotoToGallery()\\\">\\n      <ion-icon name=\\\"camera\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}